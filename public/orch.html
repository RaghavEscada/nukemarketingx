<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Orchestra 3D Scroll Animation | Codegrid</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      width: 100vw;
      height: 200vh;
      /* This creates a very tall scrollable area */
      font-family: Arial, Helvetica, sans-serif;
    }

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      background-color: #333;
      /* Fallback for missing images */
    }

    section {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }

    .sticky {
      background-color: #000000;
      color: #ffe9d9;
    }

    .logo {
      position: absolute;
      top: 25%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      gap: 24px;
      z-index: 2;
    }

    .col {
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
    }

    .col:nth-child(2) {
      gap: 26px;
    }

    .block {
      width: 35px;
      height: 35px;
      background-color: #ffe9d9;
    }

    .block-1 {
      transform: rotate(42deg);
      transform-origin: bottom right;
    }

    .block-5 {
      transform: rotate(-42deg);
      transform-origin: bottom left;
    }

    .cubes {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      transform-style: preserve-3d;
      perspective: 10000px;
    }

    .cube {
      position: absolute;
      width: 150px;
      height: 150px;
      transform-style: preserve-3d;
    }

    .cube>div {
      position: absolute;
      width: 150px;
      height: 150px;
      transform-style: preserve-3d;
      backface-visibility: visible;
      background-color: #444;
    }

    .front {
      transform: translateZ(75px);
    }

    .back {
      transform: translateZ(-75px) rotateY(180deg);
    }

    .right {
      transform: translateX(75px) rotateY(90deg);
    }

    .left {
      transform: translateX(-75px) rotateY(-90deg);
    }

    .top {
      transform: translateY(-75px) rotateX(90deg);
    }

    .bottom {
      transform: translateY(75px) rotateX(-90deg);
    }

    .cube-1 {
      top: -55%;
      left: 37.5%;
      transform: translate3d(-50%, -50%, -30000px) rotateX(360deg) rotateY(-360deg) rotateZ(-48deg);
    }

    .cube-2 {
      top: -35%;
      left: 32.5%;
      transform: translate3d(-50%, -50%, -30000px) rotateX(-180deg) rotateY(180deg) rotateZ(90deg);
    }

    .cube-3 {
      top: -65%;
      left: 50%;
      transform: translate3d(-50%, -50%, -30000px) rotateX(-90deg) rotateY(-90deg) rotateZ(-180deg);
    }

    .cube-4 {
      top: -35%;
      left: 50%;
      transform: translate3d(-50%, -50%, -30000px) rotateX(-90deg) rotateY(-90deg) rotateZ(-180deg);
    }

    .cube-5 {
      top: -55%;
      left: 62.5%;
      transform: translate3d(-50%, -50%, -30000px) rotateX(180deg) rotateY(180deg) rotateZ(-135deg);
    }

    .cube-6 {
      top: -35%;
      left: 67.5%;
      transform: translate3d(-50%, -50%, -30000px) rotateX(-90deg) rotateY(-180deg) rotateZ(-180deg);
    }

    .header-1 {
      width: 60%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(1);
      transform-origin: center center;
      text-align: center;
      color: #ffe9d9;
    }

    .header-1 h1 {
      font-weight: 400;
      font-size: 4rem;
      line-height: 1;
    }

    .header-2 {
      width: 30%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.75);
      transform-origin: center center;
      text-align: center;
      opacity: 0;
      filter: blur(10px);
      color: #ffe9d9;
    }

    .header-2 h2 {
      margin-bottom: 0.5rem;
    }

    .header-2 p {
      font-size: 1.25rem;
      font-weight: lighter;
    }

    .lenis.lenis-smooth [data-lenis-prevent] {
      overscroll-behavior: contain;
    }

    .lenis.lenis-stopped {
      overflow: clip;
    }

    .lenis.lenis-smooth iframe {
      pointer-events: none;
    }
  </style>
  <!-- Load required libraries first -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://unpkg.com/lenis@1.1.19/dist/lenis.min.js"></script>
</head>

<body>
  <section class="sticky">
    <div class="logo">
      <div class="col">
        <div class="block block-1"></div>
        <div class="block block-2"></div>
      </div>
      <div class="col">
        <div class="block block-3"></div>
        <div class="block block-4"></div>
      </div>
      <div class="col">
        <div class="block block-5"></div>
        <div class="block block-6"></div>
      </div>
    </div>

    <div class="cubes">
      <div class="cube cube-1">
        <div class="front"></div>
        <div class="back"></div>
        <div class="right"></div>
        <div class="left"></div>
        <div class="top"></div>
        <div class="bottom"></div>
      </div>

      <div class="cube cube-2">
        <div class="front"></div>
        <div class="back"></div>
        <div class="right"></div>
        <div class="left"></div>
        <div class="top"></div>
        <div class="bottom"></div>
      </div>

      <div class="cube cube-3">
        <div class="front"></div>
        <div class="back"></div>
        <div class="right"></div>
        <div class="left"></div>
        <div class="top"></div>
        <div class="bottom"></div>
      </div>

      <div class="cube cube-4">
        <div class="front"></div>
        <div class="back"></div>
        <div class="right"></div>
        <div class="left"></div>
        <div class="top"></div>
        <div class="bottom"></div>
      </div>

      <div class="cube cube-5">
        <div class="front"></div>
        <div class="back"></div>
        <div class="right"></div>
        <div class="left"></div>
        <div class="top"></div>
        <div class="bottom"></div>
      </div>

      <div class="cube cube-6">
        <div class="front"></div>
        <div class="back"></div>
        <div class="right"></div>
        <div class="left"></div>
        <div class="top"></div>
        <div class="bottom"></div>
      </div>
    </div>

    <div class="header-1">
      <h1>
        The first media company crafted for the digital first generation.
      </h1>
    </div>

    <div class="header-2">
      <h2>Where innovation meets precision.</h2>
      <p>
        Symphonia unites visionary thinkers, creative architects, and
        analytical experts, collaborating seamlessly to transform challenges
        into opportunities. Together, we deliver tailored solutions that drive
        impact and inspire growth.
      </p>
    </div>
  </section>

  <script>
    // Define cubesData object - removed "export" keyword
    const cubesData = {
      "cube-1": {
        initial: {
          top: -55,
          left: 37.5,
          rotateX: 360,
          rotateY: -360,
          rotateZ: -48,
          z: -30000,
        },
        final: {
          top: 50,
          left: 15,
          rotateX: 0,
          rotateY: 3,
          rotateZ: 0,
          z: 0,
        },
      },
      "cube-2": {
        initial: {
          top: -35,
          left: 32.5,
          rotateX: -360,
          rotateY: 360,
          rotateZ: 90,
          z: -30000,
        },
        final: {
          top: 75,
          left: 25,
          rotateX: 1,
          rotateY: 2,
          rotateZ: 0,
          z: 0,
        },
      },
      "cube-3": {
        initial: {
          top: -65,
          left: 50,
          rotateX: -360,
          rotateY: -360,
          rotateZ: -180,
          z: -30000,
        },
        final: {
          top: 25,
          left: 25,
          rotateX: -1,
          rotateY: 2,
          rotateZ: 0,
          z: 0,
        },
      },
      "cube-4": {
        initial: {
          top: -35,
          left: 50,
          rotateX: -360,
          rotateY: -360,
          rotateZ: -180,
          z: -30000,
        },
        final: {
          top: 75,
          left: 75,
          rotateX: 1,
          rotateY: -2,
          rotateZ: 0,
          z: 0,
        },
      },
      "cube-5": {
        initial: {
          top: -55,
          left: 62.5,
          rotateX: 360,
          rotateY: 360,
          rotateZ: -135,
          z: -30000,
        },
        final: {
          top: 25,
          left: 75,
          rotateX: -1,
          rotateY: -2,
          rotateZ: 0,
          z: 0,
        },
      },
      "cube-6": {
        initial: {
          top: -35,
          left: 67.5,
          rotateX: -180,
          rotateY: -360,
          rotateZ: -180,
          z: -30000,
        },
        final: {
          top: 50,
          left: 85,
          rotateX: 0,
          rotateY: -3,
          rotateZ: 0,
          z: 0,
        },
      },
    };

    // Initialize animation after ensuring all libraries are loaded
    window.addEventListener("load", () => {
      // Create smooth scrolling with Lenis
      const lenis = new Lenis();

      // Connect Lenis scroll to GSAP's ScrollTrigger
      lenis.on("scroll", ScrollTrigger.update);

      // Add ticker for animation frame updates
      gsap.ticker.add((time) => {
        lenis.raf(time * 1000);
      });

      // Disable lag smoothing for better performance
      gsap.ticker.lagSmoothing(0);

      // Get DOM elements
      const stickySection = document.querySelector(".sticky");
      const logo = document.querySelector(".logo");
      const cubesContainer = document.querySelector(".cubes");
      const header1 = document.querySelector(".header-1");
      const header2 = document.querySelector(".header-2");

      // Set sticky section height for scrolling
      const stickyHeight = window.innerHeight * 4;

      // Add background colors to cube faces instead of trying to load images
      const cubeFaces = document.querySelectorAll(".cube > div");
      const colors = ['#1a1a1a', '#2a2a2a', '#3a3a3a', '#4a4a4a', '#5a5a5a', '#6a6a6a'];

      cubeFaces.forEach((face, index) => {
        // Set a background color instead of trying to load an image
        face.style.backgroundColor = colors[index % colors.length];
      });

      // Helper function for animation interpolation
      const interpolate = (start, end, progress) => {
        return start + (end - start) * progress;
      };

      // Create scroll trigger animation
      ScrollTrigger.create({
        trigger: stickySection,
        start: "top top",
        end: `+=${stickyHeight}px`,
        scrub: 1,
        pin: true,
        pinSpacing: true,
        onUpdate: (self) => {
          // Logo animation
          const initialProgress = Math.min(self.progress * 20, 1);
          logo.style.filter = `blur(${interpolate(0, 20, initialProgress)}px)`;

          const logoOpacityProgress =
            self.progress >= 0.02 ? Math.min((self.progress - 0.02) * 100, 1) : 0;
          logo.style.opacity = 1 - logoOpacityProgress;

          // Cubes container opacity
          const cubesOpacityProgress =
            self.progress >= 0.01 ? Math.min((self.progress - 0.01) * 100, 1) : 0;
          cubesContainer.style.opacity = cubesOpacityProgress;

          // Header 1 animation
          const header1Progress = Math.min(self.progress * 2.5, 1);
          header1.style.transform = `translate(-50%, -50%) scale(${interpolate(
            1,
            1.5,
            header1Progress
          )})`;
          header1.style.filter = `blur(${interpolate(0, 20, header1Progress)}px)`;
          header1.style.opacity = 1 - header1Progress;

          // Header 2 animation
          const header2StartProgress = (self.progress - 0.4) * 10;
          const header2Progress = Math.max(0, Math.min(header2StartProgress, 1));
          const header2Scale = interpolate(0.75, 1, header2Progress);
          const header2Blur = interpolate(10, 0, header2Progress);

          header2.style.transform = `translate(-50%, -50%) scale(${header2Scale})`;
          header2.style.filter = `blur(${header2Blur}px)`;
          header2.style.opacity = header2Progress;

          // Cube animations
          const firstPhaseProgress = Math.min(self.progress * 2, 1);
          const secondPhaseProgress =
            self.progress >= 0.5 ? (self.progress - 0.5) * 2 : 0;

          // Animate each cube
          Object.entries(cubesData).forEach(([cubeClass, data]) => {
            const cube = document.querySelector(`.${cubeClass}`);
            if (!cube) return; // Skip if cube not found

            const { initial, final } = data;

            // Calculate current position and rotation values
            const currentTop = interpolate(
              initial.top,
              final.top,
              firstPhaseProgress
            );
            const currentLeft = interpolate(
              initial.left,
              final.left,
              firstPhaseProgress
            );
            const currentRotateX = interpolate(
              initial.rotateX,
              final.rotateX,
              firstPhaseProgress
            );
            const currentRotateY = interpolate(
              initial.rotateY,
              final.rotateY,
              firstPhaseProgress
            );
            const currentRotateZ = interpolate(
              initial.rotateZ,
              final.rotateZ,
              firstPhaseProgress
            );
            const currentZ = interpolate(initial.z, final.z, firstPhaseProgress);

            // Additional rotation for specific cubes
            let additionalRotation = 0;
            if (cubeClass === "cube-2") {
              additionalRotation = interpolate(0, 180, secondPhaseProgress);
            } else if (cubeClass === "cube-4") {
              additionalRotation = interpolate(0, -180, secondPhaseProgress);
            }

            // Apply transformations
            cube.style.top = `${currentTop}%`;
            cube.style.left = `${currentLeft}%`;
            cube.style.transform = `
                translate3d(-50%, -50%, ${currentZ}px)
                rotateX(${currentRotateX}deg)
                rotateY(${currentRotateY + additionalRotation}deg)
                rotateZ(${currentRotateZ}deg)
            `;
          });
        },
      });

      // Log successful initialization
      console.log("Animation initialized successfully!");
    });
  </script>
</body>

</html>